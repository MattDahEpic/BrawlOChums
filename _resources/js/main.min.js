window.onload=function(){""!=window.location.hash&&(document.getElementById("base-gameCode").value=window.location.hash.split("#")[1]);history.pushState(null,"Brawl o' Chums",location.href.split("#")[0].toUpperCase());null!==getCookie("boc-playername")&&(document.getElementById("base-playerName").value=getCookie("boc-playername"))};
window.onhashchange=function(){""!=window.location.hash&&(document.getElementById("base-gameCode").value=window.location.hash.split("#")[1]);history.pushState(null,"Brawl o' Chums",location.href.split("#")[0].toUpperCase())};var ws,gameCode,playerName,identifier,questions,currentAnswers;
function DoJoinGame(){document.getElementById("base-submit").isDisabled=!0;gameCode=document.getElementById("base-gameCode").value.toUpperCase();""===gameCode?document.getElementById("error-nogamecode").style.display="initial":(playerName=document.getElementById("base-playerName").value,""!==playerName&&(document.cookie="boc-playername="+playerName+"; expires=33071673599000; path=/",ws=new WebSocket("ws://144.217.247.108:36245"),ws.onopen=function(a){console.log("Connection Established!");ws.send('{"type":"client","code":"'+
gameCode+'","name":"'+playerName+'"'+(null!==getCookie("boc-identifier")?',"identifier":"'+getCookie("boc-indentifier")+'"':"")+"}")},ws.onmessage=function(a){console.log(a.data);a=JSON.parse(a.data);if(a.joingame){var b=new Date;b.setTime(b.getTime()+18E5);identifier=a.identifier;document.cookie="boc-identifier="+a.identifier+"; expires="+b.toUTCString()+"; path=/";document.getElementById("base-codeEntry").style.display="none";document.getElementById("other-logo").style.display="initial"}else{"loadquestions"===
a.trivia&&(questions=a.questions);if("displayquestion"===a.trivia){document.getElementById("other-logo").style.display="none";document.getElementById("trivia").style.display="initial";switch(a.display){case "1":document.getElementById("trivia-question").innerText=questions.question1.question;b=shuffleArray(questions.question1.answers);break;case "2":document.getElementById("trivia-question").innerText=questions.question2.question;b=shuffleArray(questions.question2.answers);break;case "3":document.getElementById("trivia-question").innerText=
questions.question3.question;b=shuffleArray(questions.question3.answers);break;case "4":document.getElementById("trivia-question").innerText=questions.question4.question;b=shuffleArray(questions.question4.answers);break;case "5":document.getElementById("trivia-question").innerText=questions.question5.question,b=shuffleArray(questions.question5.answers)}currentAnswers=b;document.getElementById("trivia-answer1").innerText=b[0];document.getElementById("trivia-answer2").innerText=b[1];document.getElementById("trivia-answer3").innerText=
b[2];document.getElementById("trivia-answer4").innerText=b[3]}"hidequestion"===a.trivia&&(document.getElementById("other-logo").style.display="initial",document.getElementById("trivia").style.display="none")}},ws.onclose=function(a){console.log("Connection lost! ("+a.code+")");switch(a.code){case 4001:document.getElementById("error-nogamecode").style.display="initial";break;default:document.getElementById("error-connection").style.display="initial"}}))}
function SelectTriviaAnswer(a){ws.send('{"trivia":"response","selected":"'+currentAnswers[a]+'"}');document.getElementById("other-logo").style.display="initial";document.getElementById("trivia").style.display="none"};
